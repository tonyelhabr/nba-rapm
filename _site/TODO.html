<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>TODO.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->





<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">My Website</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="README.html">
    <span class="fa fa-info-circle"></span>
     
    README
  </a>
</li>
<li>
  <a href="TODO.html">
    <span class="fa fa-list-ol"></span>
     
    Developer Notes
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="todo" class="section level1">
<h1>TODO(?)</h1>
<ul>
<li>[ ] Prefix main functions with <code>rapm_</code> (instead of <code>auto_</code>). (This could be useful if additional functionality is added to the project, such as for calculating team strength.) If this is done, not sure if same should be done with “one-time” functions (e.g. <code>combine*()</code>, <code>download*()</code>, etc.).</li>
<li>[x] Check that filtering for <code>poss_min</code> (and other criteria) is done correctly.
<ul>
<li>I’ve implemented two versions. One version removes entire lineups where any 1 player does not meet the criteria (probably more correct, if any kind of filtering is going to be done, although the corresponding offensive/defensive lineup should probably also be removed), while the other removes individual players who meet ther criteria (which seems “less correct”, but produces better results(?), anecdotally).</li>
</ul></li>
<li>[x] Try <code>intercept = FALSE</code> with models.
<ul>
<li>It returns weird results.</li>
</ul></li>
<li>[x] Try <code>standardize = FALSE</code> with models.
<ul>
<li>Seems to generate more accurate results in terms of ranks, but the coefficient values are off (in terms of magnitude).</li>
</ul></li>
<li>[x] Try <code>scale = TRUE</code>, where the dummy variables (in the stint matrix) are normalized according to number of possessions (relative to the maximum number of possessions played by any stint).
<ul>
<li>This produced some very strange/wrong results.</li>
</ul></li>
<li>[x] Try negative dummy variables for defense vs. negative response variable for defense.
<ul>
<li>No difference.</li>
</ul></li>
<li>[x] Try <code>collapse = TRUE/FALSE</code> (i.e. summarising by stints vs. not).
<ul>
<li><code>collapse = TRUE</code> seems to generate more reasonable results (although should have tested <code>ppp</code> as response instead of <code>pp100p</code> when <code>collapse = FALSE</code>)</li>
</ul></li>
<li>[x] Check/emulate how <code>{glmnet}</code> is used at:
<ul>
<li><a href="https://github.com/dgrtwo/data-screencasts/blob/3e1e3d0e14abdff00ae1493d4273e8f3b49a0a77/medium-datasci.Rmd" class="uri">https://github.com/dgrtwo/data-screencasts/blob/3e1e3d0e14abdff00ae1493d4273e8f3b49a0a77/medium-datasci.Rmd</a></li>
<li><a href="https://github.com/juliasilge/blog_by_hugo/blob/f847b7836bfcedc396e7e82867c4601ae8357853/content/blog/2018/2018-12-24-tidy-text-classification.Rmd" class="uri">https://github.com/juliasilge/blog_by_hugo/blob/f847b7836bfcedc396e7e82867c4601ae8357853/content/blog/2018/2018-12-24-tidy-text-classification.Rmd</a></li>
</ul></li>
<li>[ ] Re-do calculations to follow code shown at
<ul>
<li><a href="https://squared2020.com/2017/09/18/deep-dive-on-regularized-adjusted-plus-minus-i-introductory-example/" class="uri">https://squared2020.com/2017/09/18/deep-dive-on-regularized-adjusted-plus-minus-i-introductory-example/</a></li>
<li><a href="https://squared2020.com/2017/09/18/deep-dive-on-regularized-adjusted-plus-minus-ii-basic-application-to-2017-nba-data-with-r/" class="uri">https://squared2020.com/2017/09/18/deep-dive-on-regularized-adjusted-plus-minus-ii-basic-application-to-2017-nba-data-with-r/</a>.</li>
<li><a href="https://squared2020.com/2018/12/24/regularized-adjusted-plus-minus-part-iii-what-had-really-happened-was/" class="uri">https://squared2020.com/2018/12/24/regularized-adjusted-plus-minus-part-iii-what-had-really-happened-was/</a>
<ul>
<li>[x] Note: I’m 99% confident that I’m not making the additive rating mistake identified in the article (because I calculate <code>pp100poss</code> AFTER summing <code>pts</code> across all possessions <code>n</code>).</li>
<li>[ ] Maybe try combining offensive and defensive matrices(?), although Jacobs seems to take opinions on both sides of the argument of whether or not this should be done.</li>
</ul></li>
</ul></li>
<li>[ ] Re-do <code>clean</code> and <code>reshape</code> functions with <code>{data.table}</code> (and use S3 methods to differentiate with <code>{tibble}</code> methods).</li>
<li>[ ] Compare calculations with those at <a href="http://nbashotcharts.com/" class="uri">http://nbashotcharts.com/</a> (e.g. <a href="http://nbashotcharts.com/rapm?id=1113190703" class="uri">http://nbashotcharts.com/rapm?id=1113190703</a> for 2017 season)</li>
<li>[ ] Create function to automatically plot ORAPM vs. DRAPM. (Code/logic is already in one of the <code>.Rmd</code> files.)</li>
<li>[ ] LOW PRIORITY: Create function to regenerate profile html widgets. (Code/logic already exists somewhere in the project.)</li>
<li>[x] Move filtering function to last step before fitting (so that <code>reshape</code> step can possibly be skipped).</li>
<li>[ ] Evaluate variance of coefficients. (This doesn’t seem to come directly with <code>broom::tidy.glmnet()</code>, so it doesn’t seem trivial.)</li>
<li>[ ] Add box-score plus-minus (i.e. BPM) model and use it to stabilize RAPM models.
<ul>
<li>Possibly can just use <code>players_summary_nbastatr</code> data and run a regression. Need to consult “the literature” to figure out which features to use as predictors, as well as to figure out how to “add” the results of the model to the traditional RAPM model.</li>
</ul></li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
